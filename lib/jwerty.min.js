(function(p,v){function k(a,b){return null===a?"null"===b:void 0===a?"undefined"===b:a.is&&a instanceof l?"element"===b:7<Object.prototype.toString.call(a).toLowerCase().indexOf(b)}function q(a){var b,d,f,e,j,c,g,m;if(a instanceof q)return a;k(a,"array")||(a=String(a).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g));b=0;for(d=a.length;b<d;++b){k(a[b],"array")||(a[b]=String(a[b]).match(/(?:\+\/|[^\/])+/g));c=[];for(f=a[b].length;f--;){g=a[b][f];j={jwertyCombo:String(g),shiftKey:!1,ctrlKey:!1,
altKey:!1,metaKey:!1};k(g,"array")||(g=String(g).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g));for(e=g.length;e--;)"++"===g[e]&&(g[e]="+"),g[e]in h.mods?j[w[h.mods[g[e]]]]=!0:g[e]in h.keys?j.keyCode=h.keys[g[e]]:m=g[e].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/);if(k(j.keyCode,"undefined"))if(m&&m[1]in h.keys&&m[2]in h.keys){m[2]=h.keys[m[2]];m[1]=h.keys[m[1]];for(e=m[1];e<m[2];++e)c.push({altKey:j.altKey,shiftKey:j.shiftKey,metaKey:j.metaKey,ctrlKey:j.ctrlKey,keyCode:e,jwertyCombo:String(g)});
j.keyCode=e}else j.keyCode=0;c.push(j)}this[b]=c}this.length=b;return this}var r=p.document,l=p.jQuery||p.Zepto||p.ender||r,s,t;l===r?(s=function(a,b){return a?l.querySelector(a,b||l):l},t=function(a,b){a.addEventListener("keydown",b,!1)},$f=function(a,b){var d=document.createEvent("Event"),f;d.initEvent("keydown",!0,!0);for(f in b)d[f]=b[f];return(a||l).dispatchEvent(d)}):(s=function(a,b){return l(a||r,b)},t=function(a,b){l(a).bind("keydown.jwerty",b)},$f=function(a,b){l(a||r).trigger(l.Event("keydown",
b))});var w={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"},h={mods:{"\u21e7":16,shift:16,"\u2303":17,ctrl:17,"\u2325":18,alt:18,option:18,"\u2318":91,meta:91,cmd:91,"super":91,win:91},keys:{"\u232b":8,backspace:8,"\u21e5":9,"\u21c6":9,tab:9,"\u21a9":13,"return":13,enter:13,"\u2305":13,pause:19,"pause-break":19,"\u21ea":20,caps:20,"caps-lock":20,"\u238b":27,escape:27,esc:27,space:32,"\u2196":33,pgup:33,"page-up":33,"\u2198":34,pgdown:34,"page-down":34,"\u21df":35,end:35,"\u21de":36,home:36,
ins:45,insert:45,del:46,"delete":46,"\u2190":37,left:37,"arrow-left":37,"\u2191":38,up:38,"arrow-up":38,"\u2192":39,right:39,"arrow-right":39,"\u2193":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,
"'":222,quote:222,apostraphe:222}},c=95;for(n=0;106>++c;)h.keys["num-"+n]=c,++n;c=47;for(n=0;58>++c;)h.keys[n]=c,++n;c=111;for(n=1;136>++c;)h.keys["f"+n]=c,++n;for(var c=64;91>++c;)h.keys[String.fromCharCode(c).toLowerCase()]=c;var u=v.jwerty={event:function(a,b,d){if(k(b,"boolean")){var f=b;b=function(){return f}}a=new q(a);var e=0,j=a.length-1,c,g;return function(f){(g=u.is(a,f,e))?e<j?++e:(c=b.call(d||this,f,g),!1===c&&f.preventDefault(),e=0):e=u.is(a,f)?1:0}},is:function(a,b,d){a=new q(a);a=a[d||
0];b=b.originalEvent||b;d=a.length;for(var f=!1;d--;){var f=a[d].jwertyCombo,e;for(e in a[d])"jwertyCombo"!==e&&b[e]!=a[d][e]&&(f=!1);if(!1!==f)break}return f},key:function(a,b,d,f,e){var c=k(d,"element")||k(d,"string")?d:f,h=c===d?p:d;d=c===d?f:e;t(k(c,"element")?c:s(c,d),u.event(a,b,h))},fire:function(a,b,d,c){a=new q(a);c=k(d,"number")?d:c;$f(k(b,"element")?b:s(b,d),a[c||0][0])},KEYS:h}})(this,"undefined"!==typeof module&&module.exports?module.exports:this);